import{r as v,o as c,c as E,a as d,w as N,u as P,b as m,d as h,e as y,f as s,t as p,p as M,g as q,h as F,i as S,S as T,F as C,n as U,D as H,j as I,k as z,l as A,m as x,v as $,q as O,s as J,K,x as W,y as Q,z as X,A as Y,B as Z}from"./vendor.97e439d2.js";const tt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))e(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&e(i)}).observe(document,{childList:!0,subtree:!0});function o(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function e(r){if(r.ep)return;r.ep=!0;const a=o(r);fetch(r.href,a)}};tt();var f=(n,t)=>{for(const[o,e]of t)n[o]=e;return n};const et={};function st(n,t){const o=v("router-view");return c(),E(o)}var ot=f(et,[["render",st]]);const nt=location.hostname==="localhost"||location.hostname==="127.0.0.1",g=nt?"http://localhost:5001/v1/":"https://616961c209e030001712c33c.mockapi.io/v1/",R={async getAllPosts(){const n=await fetch(g+"posts",{mode:"cors"});if(n.status<200||n.status>=300)throw new Error(n.statusText);return n},async getPost(n){const t=await fetch(g+`posts/${n}`,{});if(t.status<200||t.status>=300)throw new Error(t.statusText);return t},async createPost(n,t,o){const e=await fetch(g+"posts/",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({author_id:o,title:t,content:n})});if(e.status<200||e.status>=300)throw new Error(e.statusText);return e},async deletePost(n){const t=await fetch(g+`posts/${n}`,{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.status<200||t.status>=300)throw new Error(t.statusText);return t},async getUser(n){const t=await fetch(g+"users/"+n,{});if(t.status<200||t.status>=300)throw new Error(t.statusText);return t},async getMeWithOnePost(n,t){const o=await fetch(g+`users/${n}/post/${t}`,{});if(o.status<200||o.status>=300)throw new Error(o.statusText);return o},async updateUser(n,t){const o=await fetch(g+`users/${n}`,t,{});if(o.status<200||o.status>=300)throw new Error(o.statusText);return o},async getAllComments(n){const t=await fetch(g+`posts/${n}/comments`,{});if(t.status<200||t.status>=300)throw new Error(t.statusText);return t},async createComment(n,t,o){const e=await fetch(g+`posts/${t}/comments`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({author_id:n,post_id:t,content:o})});if(e.status<200||e.status>=300)throw new Error(e.statusText);return e},async deleteComment(n){const t=await fetch(g+`posts/comments/${n}`,{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(t.status<200||t.status>=300)throw new Error(t.statusText);return t},async addReaction(n,t,o){const e=await fetch(g+"reactions",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({reaction_id:n,post_id:t,user_id:o})});if(e.status<200||e.status>=300)throw new Error(e.statusText);return e},async login(n,t){const o=await fetch(g+"auth/login",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:n,password:t})});if(o.status<200||o.status>=300)throw new Error(o.statusText);return o},async signup(n,t,o){const e=await fetch(g+"auth/signup",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({name:n,email:t,password:o})});if(e.status<200||e.status>=300)throw new Error(e.statusText);return e}},k={IDLE:"IDLE",RUNNING:"RUNNING",SUCCESS:"SUCCESS",ERROR:"ERROR"};async function j(n){let t=d(k.IDLE),o=d(await e());N(()=>console.log(t.value));async function e(){t.value=k.RUNNING;try{const r=await R.getUser(n);r.ok||(t.value=k.ERROR),console.log(r);const a=await r.json();return t.value=k.SUCCESS,a}catch(r){throw t.value=k.ERROR,new Error(r)}}return{user:o,status:t,Status:k}}var at="/assets/icon-left-font-monochrome-white.3f289917.png";const rt={name:"MeInHeader",async setup(){P();const{user:n,status:t,Status:o}=await j(1);return{user:n,status:t,Status:o}}},D=n=>(M("data-v-7224b84c"),n=n(),q(),n),it={class:"navbar mb-2 shadow-lg bg-neutral text-neutral-content rounded-box mx-5"},lt=D(()=>s("span",{class:"text-lg font-bold"},[s("img",{class:"logo object-cover",alt:"Groupomania logo",src:at})],-1)),ct=F('<div class="flex-1 md:w-3/5" data-v-7224b84c><div class="form-control" data-v-7224b84c><input type="text" placeholder="Recherche" class="input input-ghost" data-v-7224b84c></div><button class="btn btn-square btn-ghost" data-v-7224b84c><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-6 h-6 stroke-current" data-v-7224b84c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" data-v-7224b84c></path></svg></button></div>',1),dt={class:"dropdown dropdown-end"},ut={tabindex:"0",class:""},mt={class:"avatar"},_t={class:"rounded-full w-10 h-10 m-1"},pt=["src"],ht={tabindex:"0",class:"p-2 shadow menu dropdown-content bg-primary rounded-box w-56"},bt={class:"text-center"},ft=S("Mon profil"),vt=S("Param\xE8tres"),gt=S("Mes favoris"),yt=D(()=>s("li",null,[s("label",{class:"cursor-pointer label"},[s("span",{class:"label-text"},"Mode Sombre"),s("input",{type:"checkbox",class:"toggle toggle-secondary"})])],-1)),wt=S("D\xE9connexion");function St(n,t,o,e,r,a){const i=v("router-link");return c(),m("div",it,[h(i,{to:"/",class:"px-2 mx-2 tooltip tooltip-bottom","data-tip":"Accueil"},{default:y(()=>[lt]),_:1}),ct,s("div",dt,[s("div",ut,[s("div",mt,[s("div",_t,[s("img",{src:e.user[0].picture},null,8,pt)])]),s("ul",ht,[s("div",bt,p(e.user[0].name),1),s("li",null,[h(i,{to:"/user/"+e.user[0].id},{default:y(()=>[ft]),_:1},8,["to"])]),s("li",null,[h(i,{to:"/settings"},{default:y(()=>[vt]),_:1})]),s("li",null,[h(i,{to:"/likes"},{default:y(()=>[gt]),_:1})]),yt,s("li",null,[h(i,{to:"/logout"},{default:y(()=>[wt]),_:1})])])])])])}var xt=f(rt,[["render",St],["__scopeId","data-v-7224b84c"]]),$t="/assets/icon.f43035d1.svg";const Rt={},Nt={class:"p-10 footer bg-primary text-primary-content footer-center"},Ct=s("div",null,[s("img",{src:$t,alt:"logo groupomania footer"}),s("p",{class:"font-bold"},[S("Groupomania "),s("br"),S("Created by Na\xEFm with \u2764\uFE0F ")]),s("p",null,"Copyright \xA9 2021 - All right reserved")],-1),Et=[Ct];function kt(n,t){return c(),m("footer",Nt,Et)}var L=f(Rt,[["render",kt]]);const Ut={setup(n){return(t,o)=>{const e=v("RouterView");return c(),m(C,null,[(c(),E(T,null,{default:y(()=>[h(xt)]),_:1})),(c(),E(T,null,{default:y(()=>[s("main",null,[h(e)])]),_:1})),h(L)],64)}}},_={IDLE:"IDLE",RUNNING:"RUNNING",SUCCESS:"SUCCESS",ERROR:"ERROR"};async function Pt(){let n=d(_.IDLE),t=d(await o());N(()=>console.log(n.value));async function o(){n.value=_.RUNNING;try{const e=await R.getAllPosts();e.ok||(n.value=_.ERROR),console.log(e);const r=await e.json();return n.value=_.SUCCESS,r}catch(e){throw n.value=_.ERROR,new Error(e)}}return{posts:t,status:n,Status:_}}async function Ot(n){let t=d(_.IDLE),o=d(await e());N(()=>console.log(t.value));async function e(){t.value=_.RUNNING;try{const r=await R.getPost(n);r.ok||(t.value=_.ERROR),console.log(r);const a=await r.json();return t.value=_.SUCCESS,a}catch(r){throw t.value=_.ERROR,new Error(r)}}return{post:o,status:t,Status:_}}async function It(n,t,o){const e=d(_.IDLE),r=d(await i()),a=computed(()=>e.value===_.RUNNING);N(()=>console.log(e.value));async function i(){e.value=_.RUNNING;try{const u=await R.createPost(n,t,o);u.ok||(e.value=_.ERROR),console.log(u);const l=await u.json();return e.value=_.SUCCESS,l}catch(u){throw e.value=_.ERROR,new Error(u)}}return{newPost:r,statusPost:e,StatusPost:_,isLoading:a}}async function jt(n){console.log("Bonjour API");const t=d(_.IDLE),o=d(await r()),e=computed(()=>t.value===_.RUNNING);N(()=>console.log(t.value));async function r(){t.value=_.RUNNING;try{console.log("coucou API");const a=await R.deletePost(n);a.ok||(t.value=_.ERROR),console.log(a);const i=await a.json();return t.value=_.SUCCESS,i}catch(a){throw t.value=_.ERROR,new Error(a)}}return{posts:o,statusPost:t,StatusPost:_,isLoading:e}}async function Lt(n,t,o){const e=d(await r());async function r(){try{const a=await R.addReaction(n,t,o);return!a.ok,console.log(a),await a.json()}catch(a){throw new Error(a)}}return{newReaction:e}}const Tt={name:"Post",props:{date:{required:!0},id:{type:Number},title:{type:String,required:!0},userName:{type:String,required:!0},content:{type:String,required:!0},comments:{type:String,default:"0"},thumbs:{type:String,default:"0"},lightBulbs:{type:String,default:"0"},rofls:{type:String,default:"0"},hearts:{type:String,default:"0"}},async setup(){const n=P(),t=parseInt(n.params.id),o=1;async function e(a){try{await jt(a)}catch{return}}async function r(a){try{console.log("R\xE9action num\xE9ro : "+a+t+o),await Lt(a,t,o)}catch{return}}return{removePost:e,newReaction:r}}},At={class:"post border-2 bg-base-100 p-5 mb-10 rounded-box"},Dt={class:"text-xs mb-2 text-"},Gt={class:"text-xl mb-2"},Bt={class:"flex justify-between mt-5"},Vt={class:"btn-group"},Mt={class:"btn btn-outline btn-sm tooltip","data-tip":"Commentaires"},qt={class:"btn-group"},Ft=["for"],Ht=["id"],zt={class:"modal"},Jt={class:"modal-box"},Kt=s("p",null,[S("\xCAtes-vous s\xFBr de vouloir supprimer cette publication ? "),s("br"),S(" \u26D4\uFE0F Cette action est irr\xE9versible ! \u26D4\uFE0F")],-1),Wt={class:"modal-action"},Qt=["for"],Xt=["for"];function Yt(n,t,o,e,r,a){const i=v("router-link");return c(),m(C,null,[s("div",At,[s("p",Dt,"Publi\xE9 par "+p(o.userName)+" il y a "+p(o.date),1),h(i,{to:"/post/"+o.id},{default:y(()=>[s("h2",Gt,p(o.title),1)]),_:1},8,["to"]),s("p",null,p(o.content),1),s("div",Bt,[s("div",Vt,[s("button",Mt,[h(i,{to:"/post/"+o.id},{default:y(()=>[S(" \u{1F4AC} : "+p(o.comments),1)]),_:1},8,["to"])]),s("button",{class:U([{"btn-active":n.isActive},"btn btn-outline btn-sm tooltip"]),"data-tip":"Pouce en l'air",onClick:t[0]||(t[0]=u=>e.newReaction(1))}," \u{1F44D} : "+p(o.thumbs),3),s("button",{class:U([{"btn-active":n.isActive},"btn btn-outline btn-sm tooltip"]),"data-tip":"J'adore",onClick:t[1]||(t[1]=u=>e.newReaction(2))}," \u{1F495} : "+p(o.hearts),3),s("button",{class:U([{"btn-active":n.isActive},"btn btn-outline btn-sm tooltip"]),"data-tip":"Du g\xE9nie",onClick:t[2]||(t[2]=u=>e.newReaction(3))}," \u{1F4A1} : "+p(o.lightBulbs),3),s("button",{class:U([{"btn-active":n.isActive},"btn btn-outline btn-sm tooltip"]),"data-tip":"Je me roule par terre",onClick:t[3]||(t[3]=u=>e.newReaction(4))}," \u{1F923} : "+p(o.rofls),3)]),s("div",qt,[s("label",{for:"modal-delete-post"+o.id,class:"btn btn-outline btn-sm tooltip","data-tip":"Supprimer"},"\u274C",8,Ft)])])]),s("input",{type:"checkbox",id:"modal-delete-post"+o.id,class:"modal-toggle"},null,8,Ht),s("div",zt,[s("div",Jt,[Kt,s("div",Wt,[s("label",{for:"modal-delete-post"+o.id,class:"btn btn-warning",onClick:t[4]||(t[4]=u=>e.removePost(o.id))},"Supprimer",8,Qt),s("label",{for:"modal-delete-post"+o.id,class:"btn"},"Annuler",8,Xt)])])])],64)}var G=f(Tt,[["render",Yt]]);const Zt={components:{Post:G},async setup(){const{posts:n,status:t,Status:o}=await Pt();console.log(n),console.log(n.value[0].published);const e=H.local(2017,5,15,8,30);return console.log(e),{posts:n,status:t,Status:o,dt:e}}},te={class:"flex-col mx-10"},ee={class:"mt-10"},se=s("button",{class:"btn btn-secondary"}," Publier un nouvel article ! ",-1),oe={key:0},ne={key:1},ae=s("h1",{class:"text-lg mt-10 mb-5 ml-2"}," Les derni\xE8res publications :",-1);function re(n,t,o,e,r,a){const i=v("router-link"),u=v("Post");return c(),m("div",te,[s("div",ee,[h(i,{to:"/submit"},{default:y(()=>[se]),_:1})]),e.status!==e.Status.SUCCESS?(c(),m("div",oe," Loading... ")):(c(),m("div",ne,[ae,(c(!0),m(C,null,I(e.posts,l=>(c(),E(u,{title:l.title,userName:l.authors.name,date:l.published,content:l.content,comments:l.NumberOfComments,thumbs:l.NumberOfThumbs,lightBulbs:l.NumberOfLightBulbs,rofls:l.NumberOfRofls,hearts:l.NumberOfHearts,key:l.id,id:l.id},null,8,["title","userName","date","content","comments","thumbs","lightBulbs","rofls","hearts","id"]))),128))]))])}var ie=f(Zt,[["render",re]]);const le={},ce={class:"about"},de=s("h1",null,"This is an about page",-1),ue=[de];function me(n,t){return c(),m("div",ce,ue)}var _e=f(le,[["render",me]]);const w={IDLE:"IDLE",RUNNING:"RUNNING",SUCCESS:"SUCCESS",ERROR:"ERROR"};async function pe(n,t){let o=d(w.IDLE);d(await e()),N(()=>console.log(o.value));async function e(){o.value=w.RUNNING;try{const r=await R.login(n,t);r.ok||(o.value=w.ERROR),console.log(r);const a=await r.json();return o.value=w.SUCCESS,a}catch(r){throw o.value=w.ERROR,new Error(r)}}return{status:o,Status:w}}async function he(n,t,o){let e=d(w.IDLE);d(await r()),N(()=>console.log(e.value));async function r(){e.value=w.RUNNING;try{const a=await R.signup(n,t,o);a.ok||(e.value=w.ERROR),console.log(a);const i=await a.json();return e.value=w.SUCCESS,i}catch(a){throw e.value=w.ERROR,new Error(a)}}return{status:e,Status:w}}const be={name:"Login",components:{Footer:L},setup(){const n=d([]),t=d(""),o=d(""),e=z(),r=async()=>{e.push("/")};async function a(){console.log("Data OK !");try{(await pe(t.value,o.value)).status||console.log("Une erreur s'est produite"),console.log("c'est valid\xE9 !"),r()}catch(i){console.log(i)}}return{error:n,email:t,password:o,signIn:a}}},fe={class:"hero min-h-screen bg-primary"},ve={class:"flex-col justify-center hero-content lg:flex-row"},ge=s("div",{class:"text-center lg:text-left"},[s("h1",{class:"mb-5 text-5xl font-bold"}," Groupomania - votre r\xE9seau social interne ! "),s("p",{class:"mb-5"}," Bonjour. Connectez-vous pour entrer dans votre r\xE9seau social. ")],-1),ye={class:"card flex-shrink-0 w-full max-w-sm shadow-xl bg-base-100"},we={class:"card-body"},Se={class:"form-control"},xe=s("label",{class:"label"},[s("span",{class:"label-text"})],-1),$e={class:"form-control"},Re=s("label",{class:"label"},[s("span",{class:"label-text"})],-1),Ne=s("div",{class:"form-control mt-6"},[s("button",{class:"btn btn-primary",type:"submit"}," Se connecter "),s("label",{class:"label"},[s("a",{href:"#",class:"label-text-alt"},"Mot de passe oubli\xE9 ?")])],-1),Ce=s("div",{class:"divider"},"ou",-1),Ee=s("button",{class:"btn btn-info btn-block"}," Cr\xE9er un nouveau compte ",-1);function ke(n,t,o,e,r,a){const i=v("router-link"),u=v("Footer");return c(),m(C,null,[s("div",fe,[s("div",ve,[ge,s("div",ye,[s("div",we,[s("form",{id:"login",onSubmit:t[2]||(t[2]=A((...l)=>e.signIn&&e.signIn(...l),["prevent"])),action:"signIn",method:"post"},[s("div",Se,[xe,x(s("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=l=>e.email=l),type:"email",name:"email",placeholder:"Adresse e-mail :",class:"input input-bordered"},null,512),[[$,e.email]])]),s("div",$e,[Re,x(s("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=l=>e.password=l),name:"password",type:"password",placeholder:"Mot de passe :",class:"input input-bordered"},null,512),[[$,e.password]])]),Ne],32),s("div",null,[Ce,h(i,{to:"/signup"},{default:y(()=>[Ee]),_:1})])])])])]),h(u)],64)}var Ue=f(be,[["render",ke]]);const Pe={name:"Signup",components:{Footer:L},setup(){const n=d([]),t=d(""),o=d(""),e=d("");async function r(){console.log("Data OK !");try{await he(t.value,o.value,e.value)}catch(a){console.log(a)}}return{error:n,name:t,email:o,password:e,register:r}}},Oe={class:"hero min-h-screen bg-accent"},Ie={class:"flex-col justify-center hero-content lg:flex-row"},je=s("div",{class:"text-center lg:text-left"},[s("h1",{class:"mb-5 text-5xl font-bold"}," Bienvenue sur Groupomania ! "),s("p",{class:"mb-5"}," Bienvenue. Inscrivez-vous pour profiter de votre r\xE9seau social. ")],-1),Le={class:"card flex-shrink-0 w-full max-w-sm shadow-xl bg-base-100"},Te={class:"card-body"},Ae={class:"form-control"},De=s("label",{class:"label"},[s("span",{class:"label-text"})],-1),Ge={class:"form-control"},Be=s("label",{class:"label"},[s("span",{class:"label-text"})],-1),Ve={class:"form-control"},Me=s("label",{class:"label"},[s("span",{class:"label-text"})],-1),qe=s("div",{class:"form-control mt-6"},[s("button",{class:"btn btn-accent",type:"submit"}," S'inscrire ")],-1),Fe=s("div",{class:"divider"},"ou",-1),He=s("button",{class:"btn btn-info btn-block"}," J'ai d\xE9j\xE0 un compte ",-1);function ze(n,t,o,e,r,a){const i=v("router-link"),u=v("Footer");return c(),m(C,null,[s("div",Oe,[s("div",Ie,[je,s("div",Le,[s("div",Te,[s("form",{id:"signup",onSubmit:t[3]||(t[3]=A((...l)=>e.register&&e.register(...l),["prevent"])),action:"register",method:"post"},[s("div",Ae,[De,x(s("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=l=>e.name=l),name:"name",type:"text",placeholder:"Nom :",class:"input input-bordered"},null,512),[[$,e.name]])]),s("div",Ge,[Be,x(s("input",{id:"email","onUpdate:modelValue":t[1]||(t[1]=l=>e.email=l),name:"email",type:"email",placeholder:"Adresse e-mail :",class:"input input-bordered"},null,512),[[$,e.email]])]),s("div",Ve,[Me,x(s("input",{id:"password","onUpdate:modelValue":t[2]||(t[2]=l=>e.password=l),name:"password",type:"password",placeholder:"Mot de passe :",class:"input input-bordered"},null,512),[[$,e.password]])]),qe],32),s("div",null,[Fe,h(i,{to:"/login"},{default:y(()=>[He]),_:1})])])])])]),h(u)],64)}var Je=f(Pe,[["render",ze]]);const Ke={name:"UserSettingsProfile",props:{name:{type:String,required:!0},bio:{type:String}},setup(){}},We={class:"ml-5"},Qe=s("h1",null,"Param\xE8tres du profil : ",-1),Xe={class:"form-control my-5"},Ye=s("label",{class:"label"},[s("span",{class:"label-text"},"Modifier mon nom :")],-1),Ze={class:"form-control my-5"},ts=s("label",{class:"label"},[s("span",{class:"label-text"},"Changer ma phrase de pr\xE9sentation : ")],-1),es=s("label",{for:"change-profile-modal",class:"btn btn-primary modal-button mb-10"},"Enregistrer",-1);function ss(n,t,o,e,r,a){return c(),m("div",We,[Qe,s("div",Xe,[Ye,x(s("input",{type:"text",placeholder:"Nom",class:"input input-bordered","onUpdate:modelValue":t[0]||(t[0]=i=>o.name=i)},null,512),[[$,o.name]])]),s("div",Ze,[ts,x(s("textarea",{class:"textarea h-24 textarea-bordered",placeholder:"Bio","onUpdate:modelValue":t[1]||(t[1]=i=>o.bio=i)},null,512),[[$,o.bio]])]),es])}var os=f(Ke,[["render",ss]]);const ns={name:"UserSettingsAccount",props:{email:{}},setup(){}},as={class:"ml-5"},rs=s("h1",null,"Param\xE8tres du compte : ",-1),is={class:"form-control my-5"},ls=s("label",{class:"label"},[s("span",{class:"label-text"},"Changer mon mail :")],-1),cs=s("label",{for:"change-profile-modal",class:"btn btn-primary modal-button mb-10"},"Enregistrer",-1);function ds(n,t,o,e,r,a){return c(),m("div",as,[rs,s("div",is,[ls,x(s("input",{type:"text",placeholder:"Mail",class:"input input-bordered","onUpdate:modelValue":t[0]||(t[0]=i=>o.email=i)},null,512),[[$,o.email]])]),cs])}var us=f(ns,[["render",ds]]);const ms={components:{UserSettingsProfile:os,UserSettingsAccount:us},name:"Settings",async setup(){const{user:n,status:t,Status:o}=await j(8),e=d("Profile"),r=["Profile","Account"],a=O(()=>`UserSettings${e.value}`);return{tabs:r,currentTab:e,currentTabComponent:a,user:n,status:t,Status:o}}},_s={class:"mx-10 w-1/2"},ps={class:"tabs my-10"},hs=["onClick"],bs=s("input",{type:"checkbox",id:"change-profile-modal",class:"modal-toggle"},null,-1),fs={class:"modal"},vs={class:"modal-box"},gs=s("p",null,"Souhaitez-vous apporter les modifications demand\xE9es ?",-1),ys={class:"modal-action"},ws=s("label",{for:"change-profile-modal",class:"btn"},"Annuler",-1);function Ss(n,t,o,e,r,a){return c(),m(C,null,[s("div",_s,[s("div",ps,[(c(!0),m(C,null,I(e.tabs,i=>(c(),m("button",{key:i,class:U(["tab","tab-lifted","tab-lg",{"tab-active":e.currentTab===i}]),onClick:u=>e.currentTab=i},p(i),11,hs))),128))]),(c(),E(K,null,[(c(),E(J(e.currentTabComponent),{name:e.user.name,bio:e.user.bio,email:e.user.email},null,8,["name","bio","email"]))],1024))]),bs,s("div",fs,[s("div",vs,[gs,s("div",ys,[s("label",{for:"change-profile-modal",class:"btn btn-success",onClick:t[0]||(t[0]=(...i)=>n.updateProfile&&n.updateProfile(...i))},"Modifier mon profil"),ws])])])],64)}var xs=f(ms,[["render",Ss]]);const $s={name:"UserCard",props:{name:{type:String,required:!0},bio:{type:String,default:"Pas encore de bio"},avatar:{},background:{default:"https://picsum.photos/id/314/1000/300"},role:{default:"admin"}}},Rs={class:"card-side text-neutral-content"},Ns={class:"p-6 flex justify-center"},Cs={class:"indicator"},Es=["src"],ks={key:0,class:"indicator-item indicator-bottom indicator-center badge badge-outline border-0 badge-lg tooltip","data-tip":"Admin"},Us={class:"glass max-w-md card-body rounded-box"},Ps={class:"card-title"};function Os(n,t,o,e,r,a){return c(),m("div",{id:"userCard",class:"flex items-center w-full py-5 bg-cover card bg-base-200",style:Q({"background-image":"url("+o.background+")"})},[s("div",Rs,[s("figure",Ns,[s("div",Cs,[s("img",{src:o.avatar,class:"rounded-lg shadow-lg"},null,8,Es),o.role==="admin"?(c(),m("div",ks,"\u{1F6E1}")):W("",!0)])]),s("div",Us,[s("h2",Ps,p(o.name),1),s("p",null,p(o.bio),1)])])],4)}var Is=f($s,[["render",Os]]);const js={name:"UserStats",props:{posts:{type:Number},comments:{},likes:{}}},Ls={class:"stats border flex mt-10"},Ts={class:"stat place-items-center place-content-center"},As=s("div",{class:"stat-title"}," Articles post\xE9s :",-1),Ds={class:"stat-value"},Gs={class:"stat place-items-center place-content-center"},Bs=s("div",{class:"stat-title"}," Commentaires post\xE9s :",-1),Vs={class:"stat-value"},Ms={class:"stat place-items-center place-content-center"},qs=s("div",{class:"stat-title"}," Likes post\xE9s :",-1),Fs={class:"stat-value"};function Hs(n,t,o,e,r,a){return c(),m("div",Ls,[s("div",Ts,[As,s("div",Ds,p(o.posts),1)]),s("div",Gs,[Bs,s("div",Vs,p(o.comments),1)]),s("div",Ms,[qs,s("div",Fs,p(o.likes),1)])])}var zs=f(js,[["render",Hs]]);const Js={name:"UserFlux",props:{}},Ks={class:"flex mt-10"},Ws=s("h1",null,"Historique :",-1),Qs=[Ws];function Xs(n,t,o,e,r,a){return c(),m("div",Ks,Qs)}var Ys=f(Js,[["render",Xs]]);const Zs={components:{UserCard:Is,UserStats:zs,UserFlux:Ys},async setup(){const n=P(),{user:t,status:o,Status:e}=await j(n.params.id);return{user:t,status:o,Status:e}}},to={key:0},eo={key:1,class:"m-10"};function so(n,t,o,e,r,a){const i=v("UserCard"),u=v("UserStats"),l=v("UserFlux");return e.status===e.Status.RUNNING?(c(),m("div",to,"Loading...")):(c(),m("div",eo,[h(i,{name:e.user[0].name,avatar:e.user[0].picture,bio:e.user[0].bio,background:e.user[0].background,role:e.user[0].role},null,8,["name","avatar","bio","background","role"]),h(u,{posts:e.user[0].postsNb,likes:e.user[0].likesNb,comments:e.user[0].commentsNb},null,8,["posts","likes","comments"]),h(l)]))}var oo=f(Zs,[["render",so]]);const b={IDLE:"IDLE",RUNNING:"RUNNING",SUCCESS:"SUCCESS",ERROR:"ERROR"};async function no(n){const t=d(b.IDLE),o=d(await r()),e=O(()=>t.value===b.RUNNING);N(()=>console.log(t.value));async function r(){t.value=b.RUNNING;try{const a=await R.getAllComments(n);a.ok||(t.value=b.ERROR),console.log(a);const i=await a.json();return t.value=b.SUCCESS,i}catch(a){throw t.value=b.ERROR,new Error(a)}}return{comments:o,statusComments:t,StatusComments:b,isLoading:e}}async function ao(n,t,o){const e=d(b.IDLE),r=d(await i()),a=O(()=>e.value===b.RUNNING);N(()=>console.log(e.value));async function i(){e.value=b.RUNNING;try{const u=await R.createComment(o,t,n);u.ok||(e.value=b.ERROR),console.log(u);const l=await u.json();return e.value=b.SUCCESS,l}catch(u){throw e.value=b.ERROR,new Error(u)}}return{newComment:r,statusComments:e,StatusComments:b,isLoading:a}}async function ro(n){const t=d(b.IDLE),o=d(await r()),e=O(()=>t.value===b.RUNNING);N(()=>console.log(t.value));async function r(){t.value=b.RUNNING;try{const a=await R.deleteComment(n);a.ok||(t.value=b.ERROR),console.log(a);const i=await a.json();return t.value=b.SUCCESS,i}catch(a){throw t.value=b.ERROR,new Error(a)}}return{comments:o,statusComments:t,StatusComments:b,isLoading:e}}const io={name:"Comments",props:{date:{required:!0},updateDate:{required:!0},id:{type:Number},userName:{type:String,required:!0},content:{type:String,required:!0},comments:{type:String,default:"0"},thumbs:{type:String,default:"0"},lightBulbs:{type:String,default:"0"},rofls:{type:String,default:"0"},hearts:{type:String,default:"0"}},setup(){const n=d(!1),t=()=>{n.value=!n.value};async function o(e){await ro(e)}return{commentArea:n,toggleCommentArea:t,removeComment:o}}},lo={class:"p-5 mb-5"},co={class:"text-xs my-2 text-"},uo={class:"text-xs my-2 text-"},mo={class:"flex justify-between mt-2"},_o={class:"btn-group"},po=["for"],ho=["id"],bo={class:"modal"},fo={class:"modal-box"},vo=s("p",null,[S("\xCAtes-vous s\xFBr de vouloir supprimer ce commentaire ? "),s("br"),S(" \u26D4\uFE0F Cette action est irr\xE9versible ! \u26D4\uFE0F ")],-1),go={class:"modal-action"},yo=["for"],wo=["for"];function So(n,t,o,e,r,a){return c(),m(C,null,[s("div",lo,[s("p",co," Par : "+p(o.userName)+", il y a "+p(o.date),1),s("p",uo," Modifi\xE9 : il y a "+p(o.updateDate),1),s("p",null,p(o.content),1),s("div",mo,[s("div",_o,[s("button",{class:"btn btn-outline btn-xs tooltip","data-tip":"Pouce en l'air",onClick:t[0]||(t[0]=i=>o.thumbs++)}," \u{1F44D} : "+p(o.thumbs),1),s("button",{class:"btn btn-outline btn-xs tooltip","data-tip":"J'adore",onClick:t[1]||(t[1]=i=>o.hearts++)}," \u{1F495} : "+p(o.hearts),1),s("button",{class:"btn btn-outline btn-xs tooltip","data-tip":"Du g\xE9nie",onClick:t[2]||(t[2]=i=>o.lightBulbs++)}," \u{1F4A1} : "+p(o.lightBulbs),1),s("button",{class:"btn btn-outline btn-xs tooltip","data-tip":"Je me roule par terre",onClick:t[3]||(t[3]=i=>o.rofls++)}," \u{1F923} : "+p(o.rofls),1)]),s("label",{for:"modal-delete-comment"+o.id,class:"btn btn-outline btn-xs tooltip","data-tip":"Supprimer"},"\u274C",8,po)])]),s("input",{type:"checkbox",id:"modal-delete-comment"+o.id,class:"modal-toggle"},null,8,ho),s("div",bo,[s("div",fo,[vo,s("div",go,[s("label",{for:"modal-delete-comment"+o.id,class:"btn btn-warning",onClick:t[4]||(t[4]=i=>e.removeComment(o.id))},"Supprimer",8,yo),s("label",{for:"modal-delete-comment"+o.id,class:"btn"},"Annuler",8,wo)])])])],64)}var xo=f(io,[["render",So]]);const $o={name:"post",components:{Post:G,Comment:xo},async setup(){const n=P(),t=parseInt(n.params.id),o=1,e=d(""),{post:r,status:a,Status:i}=await Ot(n.params.id),{comments:u,statusComments:l,StatusComments:B}=await no(n.params.id);console.log(r);async function V(){try{console.log(" Le commentaire : "+e.value+", Post id : "+t+", Auteur id : "+o+" "),await ao(e.value,t,o),console.log("\xE7a marche !"),e=""}catch{return}}return{post:r,comments:u,status:a,Status:i,statusComments:l,StatusComments:B,addNewComment:V,content:e}}},Ro={class:"flex-col mx-10"},No={class:"comment border-2 bg-base-100 p-2 mb-5 rounded-box ml-5"},Co={id:"commentArea",class:"p-5"},Eo={class:"form-control"};function ko(n,t,o,e,r,a){const i=v("Post",!0),u=v("Comment");return c(),m("div",Ro,[h(i,{title:e.post[0].title,userName:e.post[0].authors.name,date:e.post[0].published,content:e.post[0].content,comments:e.post[0].NumberOfComments,thumbs:e.post[0].NumberOfThumbs,lightBulbs:e.post[0].NumberOfLightBulbs,rofls:e.post[0].NumberOfRofls,hearts:e.post[0].NumberOfHearts,id:e.post[0].id},null,8,["title","userName","date","content","comments","thumbs","lightBulbs","rofls","hearts","id"]),s("div",No,[s("div",Co,[s("div",Eo,[x(s("textarea",{class:"textarea h-24 textarea-bordered",placeholder:"\xC9crivez votre commentaire ici...",type:"text","onUpdate:modelValue":t[0]||(t[0]=l=>e.content=l)},null,512),[[$,e.content]]),s("button",{class:"btn btn-primary mt-2",onClick:t[1]||(t[1]=(...l)=>e.addNewComment&&e.addNewComment(...l))},"Commenter")])]),(c(!0),m(C,null,I(e.comments,l=>(c(),E(u,{userName:l.authors.name,date:l.published,updateDate:l.updated,content:l.content,comments:l.NumberOfComments,thumbs:l.NumberOfThumbs,lightBulbs:l.NumberOfLightBulbs,rofls:l.NumberOfRofls,hearts:l.NumberOfHearts,id:l.id,key:l.id},null,8,["userName","date","updateDate","content","comments","thumbs","lightBulbs","rofls","hearts","id"]))),128))])])}var Uo=f($o,[["render",ko]]);const Po={},Oo={class:"Likes"},Io=s("h1",null,"This is a likes page",-1),jo=[Io];function Lo(n,t){return c(),m("div",Oo,jo)}var To=f(Po,[["render",Lo]]);const Ao={},Do=s("div",null," Vous \xEAtes perdu.e ",-1);function Go(n,t){const o=v("Header"),e=v("Footer");return c(),m(C,null,[h(o),Do,h(e)],64)}var Bo=f(Ao,[["render",Go]]);const Vo={async setup(){const n=d(""),t=d(""),o=1;async function e(){try{console.log("Le Post part \xE0 la Poste !"),await It(t.value,n.value,o)}catch{return}}return{content:t,title:n,addNewPost:e}}},Mo={class:"flex-col mx-10"},qo={class:"p-5"},Fo={class:"form-control"};function Ho(n,t,o,e,r,a){return c(),m("div",Mo,[s("div",qo,[s("div",Fo,[x(s("input",{class:"textarea h-24 textarea-bordered",placeholder:"\xC9crivez votre commentaire ici...",type:"text","onUpdate:modelValue":t[0]||(t[0]=i=>e.title=i)},null,512),[[$,e.title]]),x(s("textarea",{class:"textarea h-24 textarea-bordered",placeholder:"\xC9crivez votre commentaire ici...",type:"text","onUpdate:modelValue":t[1]||(t[1]=i=>e.content=i)},null,512),[[$,e.content]]),s("button",{class:"btn btn-primary mt-2",onClick:t[2]||(t[2]=(...i)=>e.addNewPost&&e.addNewPost(...i))},"Publier")])])])}var zo=f(Vo,[["render",Ho]]);const Jo={},Ko={},Wo=[{path:"/",name:"Layout",component:Ut,children:[{path:"",name:"Home",component:ie},{path:"/about",name:"About",component:_e},{path:"/settings",name:"Settings",component:xs},{path:"/user/:id",name:"User",component:oo},{path:"/post/:id",name:"Post",component:Uo},{path:"/likes",name:"Likes",component:To},{path:"/lost",name:"Lost",component:Bo},{path:"/submit",name:"Submit",component:zo},{path:"/search",name:"Search",component:Jo}]},{path:"/login",name:"Login",component:Ue},{path:"/logout",name:"Logout",component:Ko},{path:"/signup",name:"Signup",component:Je}],Qo=X({history:Y(),routes:Wo});Z(ot).use(Qo).mount("#app");
